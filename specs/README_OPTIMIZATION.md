# Оптимизация работы с OpenAPI спецификацией

## Проблема
Файл `server.yml` содержит 6871 строку, что замедляет анализ и добавление новых эндпоинтов.

## Решение
Создана система файлов для ускорения работы:

### 1. `server_base.yml` - Базовая структура
- Содержит основные схемы и паттерны
- Примеры эндпоинтов
- Все стандартные схемы ошибок
- Общие компоненты (Pagination, SortOrder, etc.)

### 2. `QUICK_REFERENCE.md` - Быстрый справочник
- Паттерны эндпоинтов (GET, POST, PUT, DELETE)
- Стандартные коды ответов
- Группы эндпоинтов в проекте
- Рекомендации по именованию

### 3. `ENDPOINT_TEMPLATES.yml` - Шаблоны для копирования
- Готовые шаблоны всех типов эндпоинтов
- Шаблоны схем (Resource, CreateRequest, UpdateRequest, etc.)
- Можно копировать и адаптировать

## Как использовать

### Для добавления нового эндпоинта:

1. **Откройте `server_base.yml`** - изучите структуру и примеры
2. **Посмотрите `QUICK_REFERENCE.md`** - выберите подходящий паттерн
3. **Скопируйте шаблон** из `ENDPOINT_TEMPLATES.yml`
4. **Адаптируйте под ваши нужды**:
   - Замените `resource` на ваше название
   - Обновите `operationId`
   - Добавьте специфичные параметры
   - Обновите схемы запросов/ответов

### Пример быстрого добавления:

```bash
# 1. Найдите похожий эндпоинт в server.yml
grep -A 20 "operationId: List" specs/server.yml

# 2. Скопируйте шаблон из ENDPOINT_TEMPLATES.yml
# 3. Адаптируйте под ваши нужды
# 4. Добавьте в server.yml
```

## Преимущества

1. **Быстрый доступ** к основным паттернам
2. **Консистентность** - все эндпоинты следуют одним правилам
3. **Меньше ошибок** - используем проверенные шаблоны
4. **Легче поддерживать** - изменения в одном месте

## Структура файлов

```
specs/
├── server.yml              # Полная спецификация (6871 строк)
├── server_base.yml         # Базовая структура с примерами
├── QUICK_REFERENCE.md      # Справочник по паттернам
├── ENDPOINT_TEMPLATES.yml  # Готовые шаблоны
└── README_OPTIMIZATION.md  # Этот файл
```

## Рекомендации

1. **Всегда начинайте с `server_base.yml`** - там есть все основные схемы
2. **Используйте стандартные схемы ошибок** - не изобретайте велосипед
3. **Следуйте паттернам именования** - `ListResources`, `CreateResource`, etc.
4. **Копируйте существующие эндпоинты** и адаптируйте
5. **Добавляйте `security: - bearerAuth: []`** ко всем защищенным эндпоинтам

## Быстрые команды для поиска

```bash
# Найти все эндпоинты определенного типа
grep -A 5 "operationId: List" specs/server.yml

# Найти все схемы ошибок
grep "Error[A-Z]" specs/server_base.yml

# Найти примеры параметров
grep -A 10 "parameters:" specs/server_base.yml
```
